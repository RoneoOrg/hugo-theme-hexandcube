<div class="bg-light-secondary-bg dark:bg-dark-secondary-bg">
    <header id="header" class="responsive py-3">
        <a href="/"
            class="font-brand md:font-logo font-bold md:font-normal align-middle text-4xl hover:bg-light-secondary
            dark:hover:bg-dark-secondary text-light-secondary-text dark:text-dark-text md:rounded-xl rounded-full px-2 -ml-2
            md:py-2 py-1">hexandcube</a>
        <div class="inline-block float-right">
            <div
                class="px-2 -ml-2 py-1 md:mt-3 font-bold align-middle rounded-full hover:bg-light-secondary dark:hover:bg-dark-secondary text-light-secondary-text dark:text-dark-secondary-text inline-block">
                <label for="theme-toggle" id="theme-toggle-label" class="text-xl" onclick="toggleTheme()">
                    <i class="fa-solid fa-circle-notch animate-spin"></i>
                    <input type="checkbox" class="hidden" id="theme-toggle" />
                </label>
            </div>
            <div class="px-2 py-1 font-bold align-middle text-xl rounded-full hover:bg-light-secondary dark:hover:bg-dark-secondary text-light-secondary-text dark:text-dark-secondary-text md:hidden inline-block"
                onclick="toggleNavbar()">
                <i class="fa-solid fa-bars fa-fw"></i>
            </div>
        </div>
        <nav class="md:inline-block hidden pb-5 md:pb-0 pl-3 mx-1 mt-3 md:md-0 border-light-border dark:border-dark-border"
            id="navbar">
            {{ $current := . }}
            {{ range .Site.Menus.main }}
            {{ $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) }}
            {{ $active = or $active (eq .Name $current.Title) }}
            <a href="{{ .URL }}" class="md:inline-block block px-4 -ml-3 md:ml-0 py-2 mt-1 md:mt-0 align-middle rounded-full 
                {{ if $active }}bg-light-selection dark:bg-dark-selection text-light-secondary-text dark:text-dark-secondary-text hover:bg-light-secondary font-bold
                {{ else }}hover:bg-light-secondary dark:hover:bg-dark-secondary text-light-secondary-text dark:text-dark-secondary-text{{end}}">
                <i class="fa-solid {{ .Pre }} mr-1"></i> {{ .Name }}</a>
            {{ end }}
        </nav>
    </header>
</div>

<script>
    var nav = document.getElementById('navbar');
    var header = document.getElementById('header');

    function toggleNavbar() {
        if (navbar.classList.contains('hidden')) {
            navbar.classList.remove('hidden');
            header.classList.add('extended');
        } else {
            navbar.classList.add('hidden');
            header.classList.remove('extended');
        }
    }
</script>